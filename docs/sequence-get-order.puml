@startuml
' Get Order — Sequence (real code names; repository + data store + domain exception mapping)
autonumber

actor Client #AEE3FF

box "Orders Service" #DDDDDD
  participant OrderController #C7F9CC
  participant GetOrderHandler #FFF3B0
  participant OrderRepository #FFD6A5
end box

participant "Data Store" as DataStore #FFD6A5

Client -> OrderController: GET /orders/{id} (Retrieve Order)
OrderController -> GetOrderHandler: Execute
activate GetOrderHandler

GetOrderHandler -> GetOrderHandler: Validate input
alt Invalid input (4xx)
  GetOrderHandler -[#FFF3B0]-> OrderController: ValidationException
  OrderController --> Client: 400 Invalid request
else Valid
  GetOrderHandler -> OrderRepository: get(id)
  activate OrderRepository
  OrderRepository -> DataStore: read
  DataStore --> OrderRepository: Order|null
  OrderRepository --> GetOrderHandler: Order|null
  deactivate OrderRepository
end

alt OrderNotFoundException
  GetOrderHandler -[#FFF3B0]-> OrderController: OrderNotFoundException
  OrderController --> Client: 404 Not Found
else Found
  GetOrderHandler -> GetOrderHandler: Map Order → DTO
  GetOrderHandler --> OrderController: DTO
  OrderController --> Client: 200 OK (JSON)
end

destroy GetOrderHandler

legend left
  | Layer | Sample |
  | Presentation | <#C7F9CC> |
  | Application | <#FFF3B0> |
  | Domain | <#E8EAED> |
  | Infrastructure (Adapters/Persistence) | <#FFD6A5> |
  | External Actor/System | <#AEE3FF> |
endlegend

footer [[https://mundiir.github.io/meetup-2025-orders-service/c4-component.svg Back to C4 Component]]
@enduml
