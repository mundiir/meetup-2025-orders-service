@startuml
' GetOrder Use Case â€” Application Layer with activations

skinparam sequenceMessageAlign center
skinparam BoxPadding 10

actor Client #lightblue
participant "OrderController" as Controller #lightyellow
participant "GetOrderHandler" as Handler #lightgreen
participant OrderRepository as Repo #lightcyan

Client -> Controller: GET /orders/{id}
activate Controller #lightyellow

Controller -> Handler: __invoke(GetOrderQuery)
activate Handler #lightgreen

Handler -> Handler: OrderId::fromString(orderId)
note right: Validate and convert\nstring ID to ValueObject

Handler -> Repo: get(orderId)
activate Repo #lightcyan
Repo --> Handler: order?
deactivate Repo

alt Order not found
  Handler --> Controller: throw OrderNotFoundException
  note right #pink: Exception thrown\nwhen order\ndoes not exist
  deactivate Handler
  Controller --> Client: 404 Not Found
  deactivate Controller
  return
end

Handler -> Handler: Build GetOrderResult\nfrom Order entity
note right: Extract order details:\n- id\n- amountCents\n- currency\n- status\n- createdAt

Handler --> Controller: GetOrderResult
deactivate Handler

Controller --> Client: 200 OK\n(JSON response)
deactivate Controller

footer [[https://mundiir.github.io/meetup-2025-orders-service/c4-component.svg Back to C4 Component]]

@enduml
