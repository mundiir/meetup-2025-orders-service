@startuml
' Get Order — Sequence (real code names; ports + two-hop; colored legend)
autonumber

actor Client #AEE3FF

box "Orders Service" #DDDDDD
  participant OrderController #C7F9CC
  participant GetOrderHandler #FFF3B0
  participant OrderRepository #FFD6A5
end box

participant "Data Store" as DataStore #FFD6A5

Client -> OrderController: GET /orders/{id} (Retrieve Order)
OrderController -> GetOrderHandler: Execute
activate GetOrderHandler

GetOrderHandler -> GetOrderHandler: Validate input
alt Invalid input (4xx)
  GetOrderHandler --> OrderController: Error response
  deactivate GetOrderHandler
  return
end

GetOrderHandler -> OrderRepository: get(id)
activate OrderRepository
OrderRepository -> DataStore: read
DataStore --> OrderRepository: Order | null
OrderRepository --> GetOrderHandler: Order | null
deactivate OrderRepository

alt OrderNotFoundException (404)
  GetOrderHandler --> OrderController: OrderNotFoundException
  deactivate GetOrderHandler
  OrderController --> Client: 404 Not Found
  return
else Found (200)
  GetOrderHandler -> GetOrderHandler: Map Order → DTO
  GetOrderHandler --> OrderController: DTO
  deactivate GetOrderHandler
  OrderController --> Client: 200 OK (JSON)
end

legend left
  | Layer | Sample |
  | Presentation | <#C7F9CC> |
  | Application | <#FFF3B0> |
  | Domain | <#E8EAED> |
  | Infrastructure (Adapters/Persistence/3rd Party) | <#FFD6A5> |
  | External | <#AEE3FF> |
endlegend

footer [[https://mundiir.github.io/meetup-2025-orders-service/c4-component.svg Back to C4 Component]]
@enduml
